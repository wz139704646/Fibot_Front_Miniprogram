<cu-custom bgColor="bg-gradual-blue" isBack="{{true}}">
  <view slot="backText">返回</view>
  <view slot="content">详情</view>
</cu-custom>

<view class="cu-list menu-avatar no-padding card-menu shadow-lg radius">
  <view class="cu-form-group margin-top">
    <view class="title">单号</view>
    <input disabled value='{{id}}' style="text-align:right"></input>
  </view>
  <view class="cu-form-group">
    <view class="title">开单日期</view>
    <picker disabled='{{true}}' mode="date" value="{{date}}">
      <view class="picker">
        {{date}}
      </view>
    </picker>
  </view>
  <view class="cu-form-group">
    <view class="title">{{back ? back=='sell' ? '客户' : '供应商' : '出错'}}</view>
    <input disabled value='{{pname}}' style="text-align:right"></input>
    <text class="cuIcon-friendadd text-orange"></text>
  </view>
  <view class="cu-form-group">
    <view class="title">商品</view>
    <input disabled placeholder='' style="text-align:right"></input>
    <text class="cuIcon-goods text-orange"></text>
  </view>

  <!-- <block wx:key wx:for='{{buyList}}' wx:for-index='index'>
    <view class="cu-bar bg-gray">
      <view class="action text-black">{{item.goodsName}}</view>
      <view class="action text-black">单价:{{back=='sell' ? item.sumprice/item.number : item.price}}</view>
      <view class='action text-black'>数量:{{item.number}}</view>
      <view class="action text-black">合计:{{back ? back=='sell' ? item.sumprice : item.price*item.number : '出错'}}</view>
    </view>
    <view class="divLine"></view>
  </block> -->
  <block wx:key wx:for='{{buyList}}' wx:for-index='index'>
    <van-card tag="{{item.type}}" price="合计:{{back ? back=='sell' ? item.sumprice : item.price*item.number : '出错'}}" desc="单价:{{back=='sell' ? item.sumprice/item.number : item.price}}\r\n数量:{{item.number}}" title="{{item.goodsName}}" thumb="{{host+'/goodsPic/'+item.goodsPhoto}}" thumb-mode="aspectFill">
    </van-card>
    <view class="divLine"></view>
  </block>
  <view class="cu-bar bg-white">
    <view class="action text-red text-price">总价:{{total}}</view>
  </view>
  <view class="divLine"></view>
  <view wx:if="{{fun=='入库'&&status=='运'}}" class="cu-form-group">
    <view class="title">仓库</view>
    <picker bindchange="PickerChange" value="{{index}}" range="{{storeList}}" range-key="{{'name'}}">
      <view class="picker">
        {{index?storeList[index].name:'请选择'}}
      </view>
    </picker>
  </view>
  <view wx:if="{{fun=='入库'&&status=='运'}}" class="divLine"></view>
  <view class="cu-bar bg-white">
    <view wx:if="{{fun=='null'}}" class="action text-red" bindtap="delBill">删除订单</view>
    <view wx:if="{{fun=='入库'&&status=='运'}}" class="action text-red" bindtap="buyArrived">确认入库</view>
    <view wx:if="{{fun=='出库'}}" class="action text-red" bindtap="sellOut">确认出库</view>
    <view class="action text-blue" bindtap="backToList">返回列表</view>
  </view>
</view>

<!-- 选库存的模态框 -->
<view class="cu-modal bottom-modal {{isShow?'show':''}}" bindtap="hideModal">
  <view class="cu-dialog">
    <view class="cu-bar bg-white">
      <view class="action text-green">确定</view>
      <view class="action text-blue" bindtap="hideModal">取消</view>
    </view>
    <view class="padding-xl">
      Modal 内容。
    </view>
  </view>
</view>
